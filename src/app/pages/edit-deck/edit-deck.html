<div class="edit-deck-container">
  <h1>Edit Deck</h1>

  @if (deck) {
    <div class="deck-form container card-container">
      <label>
        Name:
        <input type="text" [(ngModel)]="deck.name" class="input" />
      </label>

      <label>
        Public:
        <input type="checkbox" [(ngModel)]="deck.public" />
      </label>

      <div class="actions">
        <button (click)="saveDeck()" [disabled]="saving" class="btn btn-primary">Save Settings</button>
        <button (click)="navigateBack()" class="btn btn-secondary">Back</button>
      </div>
    </div>

    <hr />

    <h2>Cards</h2>
    <ul class="cards-list container card-container">
      @for (card of cards; track card.id; let i = $index) {
        <li class="card-item card-container">
          @if (editingCardIndex !== i) {
            <div class="card-view">
              <div class="card-front"><strong>Front:</strong> {{ card.front }}</div>
              <div class="card-back"><strong>Back:</strong> {{ card.back }}</div>
              <div class="card-actions">
                <button (click)="startEditCard(i)" class="btn btn-secondary">Edit</button>
                <button (click)="deleteCard(i)" class="btn btn-danger">Delete</button>
              </div>
            </div>
          }

          @if (editingCardIndex === i) {
            <div class="card-edit">
              <input [(ngModel)]="editFront" placeholder="Front" class="input" />
              <input [(ngModel)]="editBack" placeholder="Back" class="input" />
              <button (click)="saveCard(i)" class="btn btn-primary">Save</button>
              <button (click)="cancelEdit()" class="btn btn-secondary">Cancel</button>
            </div>
          }
        </li>
      }
    </ul>

    <div class="add-card container card-container">
      <h3>Add Card</h3>
      <input [(ngModel)]="newCardFront" placeholder="Front" class="input" />
      <input [(ngModel)]="newCardBack" placeholder="Back" class="input" />
      <button (click)="addCard()" [disabled]="!newCardFront.trim()" class="btn btn-primary">Add Card</button>
    </div>
  }
</div>
